<!DOCTYPE html>
<html>

  <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Obs Studio Stream Mobile Phone Cameras</title>
      <meta name="viewport" content="width=device-width">
      <meta name="description" content="I am writing here some toughts during my work in Ruby on Rails, Javascript and other">
      <link rel="shortcut icon" type="image/png" href="/assets/favicon.png"/>

      <!-- Custom CSS -->
      <link rel="stylesheet" href="/assets/css/main.css">
      <link rel="stylesheet" href="/assets/css/toc.css">

  </head>

  <body>

    <header class="site-header">

      <div class="wrap">

        <a class="site-title" href="/">duleorlovic - web developer</a>

        <nav class="site-nav">
          <a href="#" class="menu-icon">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
               viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve">
              <path fill="#505050" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0
                h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#505050" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484
                h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#505050" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0
                c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </a>
          <div class="trigger">
            
              <a class="page-link" href="/about/">About</a>
            
              
            
              
            
              
            
          </div>
        </nav>
        <small>tools like
          <a href=" 
            /2015/04/05/common-rails-bootstrap-snippets/"
            >Rails bootstrap</a>,
          <a href=" /2015/11/09/rails-testing/">Rails testing</a>
            and <a href=" 
            /2016/04/12/rails-tips/">Rails tips</a>
          are still in use so content can be updated!
          <a href="javascript:void(0)"
            onclick="document.getElementById('mc_embed_signup').classList.toggle('active');">Notify
          me</a>
        </small>
	  <!-- Begin MailChimp Signup Form -->
	  <link href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css" rel="stylesheet" type="text/css">
	  <style type="text/css">
		  #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
		  /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
		     We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
	  </style>
	  <div id="mc_embed_signup" class="signup-form">
	    <form action="//trk.us14.list-manage.com/subscribe/post?u=819590ae53cb08bddb952ed97&amp;id=ec1213024d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
		<div id="mc_embed_signup_scroll">
	    <div class="indicates-required"><span class="asterisk">*</span> indicates required</div>
	    <div class="mc-field-group">
		    <label for="mce-EMAIL">Email Address  <span class="asterisk">*</span>
	    </label>
		    <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
	    </div>
		    <div id="mce-responses" class="clear">
			    <div class="response" id="mce-error-response" style="display:none"></div>
			    <div class="response" id="mce-success-response" style="display:none"></div>
		    </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
		<div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_819590ae53cb08bddb952ed97_ec1213024d" tabindex="-1" value=""></div>
		<div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
		</div>
	    </form>
	  </div>
	  <script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
	  <!--End mc_embed_signup-->

      </div>
    <!-- Html Elements for Search -->
    <div id="search-demo-container">
    <input type="text" id="search-input" placeholder="search...">
    <ul id="results-container"></ul>
    </div>

    <!-- Script pointing to jekyll-search.js -->
    <script src="/bower_components/simple-jekyll-search/dest/jekyll-search.js" type="text/javascript"></script>
    <script>
      SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        json: '/search.json',
      });
    </script>

    </header>
    <div class="page-content">
      <div class="wrap">
      <div class="post">

  <header class="post-header">
    <h1>Obs Studio Stream Mobile Phone Cameras</h1>
    <p class="meta">May 5, 2020</p>
  </header>

  <article class="post-content">
  <body><div id="toc-container"><table class="toc" id="toc"><tbody><tr><td><div id="toctitle"><h2>Contents</h2></div><ul><li class="toc_level-1 toc_section-1"><a href="#install"><span class="tocnumber">1</span> <span class="toctext">Install</span></a></li><li class="toc_level-1 toc_section-2"><a href="#stream-from-ip-cameras"><span class="tocnumber">2</span> <span class="toctext">Stream from IP cameras</span></a></li><li class="toc_level-1 toc_section-3"><a href="#stream-from-mobile-phone"><span class="tocnumber">3</span> <span class="toctext">Stream from mobile Phone</span></a><ul><li class="toc_level-2 toc_section-4"><a href="#stream-remote-screen-recordings"><span class="tocnumber">3.1</span> <span class="toctext">Stream remote screen recordings</span></a></li></ul></li><li class="toc_level-1 toc_section-5"><a href="#scenes"><span class="tocnumber">4</span> <span class="toctext">Scenes</span></a><ul><li class="toc_level-2 toc_section-6"><a href="#auto-rotate-scenes-based-on-timer"><span class="tocnumber">4.1</span> <span class="toctext">Auto rotate scenes based on timer</span></a></li></ul></li></ul></td></tr></tbody></table></div><h1 id="install">Install</h1>

<p>Install https://obsproject.com/</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo add-apt-repository ppa:obsproject/obs-studio
sudo apt-get update
sudo apt-get install obs-studio
</code></pre></div></div>
<h1 id="stream-from-ip-cameras">Stream from IP cameras</h1>

<p>You can stream RTSP cameras by selecting “Media source” and unchecking “Local
file” and on <code class="language-plaintext highlighter-rouge">input</code> put url</p>

<p>For RTSP you can use media source but it is better in my case to use VLC player and use window source
Here is example url for two cameras:
rtsp://admin:admin@192.168.1.108:554/cam/realmonitor?channel=1&amp;subtype=0&amp;unicast=true&amp;proto=Onvif
rtsp://admin:admin@192.168.1.168:80/0</p>

<h1 id="stream-from-mobile-phone">Stream from mobile Phone</h1>

<p>IP Webcam Pavel Khlebovich
https://play.google.com/store/apps/details?id=com.pas.webcam&amp;hl=en&amp;gl=US</p>

<p>On app:
To keep working after locking the screen you need to add permission: Service
control, optional permissions,
To keep WiFi, you can disable batery optimisation for IP Webcam</p>

<p>In browser http://192.168.1.100:8080/ (keep this opened to check connection)
Crop only works when zoom is applied.
In advance settings set video resolution to be the same for all phones, 1280x720
(same as obs project -&gt; settings -&gt; video -&gt; base canvas resolution)</p>

<h2 id="stream-remote-screen-recordings">Stream remote screen recordings</h2>

<p>You can stream from other computers using VNC (on windows install TinyVNC) and
on main comp use VNC viewer and stream that Window Capture (Xcomposite).</p>

<p>Stream from web use: https://github.com/bazukas/obs-linuxbrowser</p>

<h1 id="scenes">Scenes</h1>

<p>Hold Alt key to crop.
https://obsproject.com/wiki/Sources-Guide#scenes-and-sources-overview</p>

<p>Since changing scenes will disconnect and reconnect again, best way to switch
cameras is to move to top (on mac it is fn + cmd + left).
To preview cameras you can use right click and “Windowed projector” so you can
see all three cameras in three windows.
On each source you should use “Transform” and “Strech to screen”. It is good to
have all cameras with same ratio width and height.</p>

<p>In OBS you can go File -&gt; Show Recordings or File -&gt; Remux recordings to create
mp4 from mkv files.</p>

<p>To start multiple VLC players you can run</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># cameras.sh
open -n /Applications...../VLC rtsp://...../video &amp;
open -n /Applications...../VLC rtsp://...../video
</code></pre></div></div>

<h2 id="auto-rotate-scenes-based-on-timer">Auto rotate scenes based on timer</h2>

<p>Advances Scene switcher
https://obsproject.com/forum/resources/advanced-scene-switcher.395/ source
https://github.com/WarmUpTill/SceneSwitcher</p>

<p>To install download .so and copy</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo cp ~/Downloads/SceneSwitcher/SceneSwitcher/Linux/advanced-scene-switcher.so /usr/lib/obs-plugins/
</code></pre></div></div>

<p>On linux there could be an error (Help -&gt; Log files -&gt; View current log)</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>09:13:53.109: os_dlopen(/usr//lib/obs-plugins/advanced-scene-switcher.so-&gt;/usr//lib/obs-plugins/advanced-scene-switcher.so): /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5: version `Qt_5' not found (required by /usr//lib/obs-plugins/advanced-scene-switcher.so)
09:13:53.109:
09:13:53.109: Module '/usr//lib/obs-plugins/advanced-scene-switcher.so' not loaded
</code></pre></div></div>

<p>You can check which libraries qt is using <code class="language-plaintext highlighter-rouge">ldd $(which qtcreator)</code> (it is in
/usr/lib/x86_64-linux-gnu/libQt5Gui.so.5: but plugin is not using it).
I tried to compile plugin from source</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake -DLIBOBS_INCLUDE_DIR=~/Programs/obs-studio/libobs -DLIBOBS_FRONTEND_INCLUDE_DIR=~/Programs/obs-studio/UI/obs-frontend-api/ -DLIBOBS_FRONTEND_API_LIB=/usr/lib/ -DCMAKE_INSTALL_PREFIX=/usr ..
make
</code></pre></div></div>
<p>but I receive error</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Generating ui_advanced-scene-switcher.h
File '/home/orlovic/Programs/SceneSwitcher/src/headers/advanced-scene-switcher.ui' is not valid
AUTOUIC: error: process for ui_advanced-scene-switcher.h needed by
 "/home/orlovic/Programs/SceneSwitcher/src/headers/advanced-scene-switcher.hpp"
</code></pre></div></div>

<p>So I build from source using Debian-based Build Directions on
https://obsproject.com/wiki/install-instructions#linux</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install build-essential pkg-config cmake git-core checkinstall
sudo apt-get install libx11-dev libgl1-mesa-dev libvlc-dev libpulse-dev libxcomposite-dev libxinerama-dev libv4l-dev libudev-dev libfreetype6-dev libfontconfig1-dev qtbase5-dev libqt5x11extras5-dev libqt5svg5-dev libx264-dev libxcb-xinerama0-dev libxcb-shm0-dev libjack-jackd2-dev libcurl4-openssl-dev libluajit-5.1-dev swig python3-dev
</code></pre></div></div>

<p>Install ffmpeg from source</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install zlib1g-dev yasm
git clone --depth 1 git://source.ffmpeg.org/ffmpeg.git
cd ffmpeg
./configure --enable-shared --prefix=/usr
make -j4
sudo checkinstall --pkgname=FFmpeg --fstrans=no --backup=no \
        --pkgversion="$(date +%Y%m%d)-git" --deldoc=yes
#      dpkg -r ffmpeg

</code></pre></div></div>

<p>To find package which provide a header file</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt-file search X11/extensions/scrnsaver.h
</code></pre></div></div>

<p>So I installed also</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install libxss-dev
</code></pre></div></div>

<p>Build OBS</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone --recursive https://github.com/obsproject/obs-studio.git
cd obs-studio
mkdir build &amp;&amp; cd build
cmake -DUNIX_STRUCTURE=1 -DCMAKE_INSTALL_PREFIX=/usr ..
make -j4
sudo checkinstall --pkgname=obs-studio --fstrans=no --backup=no \
       --pkgversion="$(date +%Y%m%d)-git" --deldoc=yes
</code></pre></div></div>

</body>
  </article>

  
  
  
  
    
  
  
  
  
  
  
  
  

</div>

      </div>
    </div>

    <style type='text/css'>
      .similar-links {
        display: inline-block;
        padding: 10px;
      }
    </style>
    <footer class="site-footer">

      <div class="wrap">

        <h2 class="footer-heading">duleorlovic - web developer</h2>

        <div class="footer-col-1 column">
          <ul>
            <li><a href="http://duleorlovic.github.io/tips/">short indistinct tips</a></li>
          </ul>
        </div>

        <div class="footer-col-2 column">
          <ul>
            <li>
              <a href="https://github.com/duleorlovic">
                <span class="icon github">
                  <svg version="1.1" class="github-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                     viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                    <path fill-rule="evenodd" clip-rule="evenodd" fill="#C2C2C2" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761
                    c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32
                    c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472
                    c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037
                    C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65
                    c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261
                    c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082
                    c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129
                    c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                  </svg>
                </span>
                <span class="username">duleorlovic</span>
              </a>
            </li>
          </ul>
        </div>

        <div class="footer-col-3 column">
          <p class="text">I am writing here some toughts during my work in Ruby on Rails, Javascript and other</p>
        </div>

      </div>

    </footer>

  </body>
</html>
