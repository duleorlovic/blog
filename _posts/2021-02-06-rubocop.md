---
layout: post
---

# Rubocop

```
rubocop my-file.rb
# safe auto correct
rubocop -a
# auto correct all
rubocop -A
# auto correct only layout (formatting offenses)
rubocop -x
# only specific cops
rubocop --only Rails/Blank,Naming/FileName
# add rubocop comments that disable warnings and fix what can be fixes
rubocop --auto-correct --disable-uncorrectable
```

Cache is used by default `AllCopps: UseCache` is true and stored in
`~/.cache/rubocop_cache/`

# Configuration

https://docs.rubocop.org/rubocop/configuration.html
Default configuration
https://github.com/rubocop-hq/rubocop/blob/master/config/default.yml

Configuration can inherit parent configuration and override (hash are merged or
canceled with `~`, other types are overriden.

```
# rubocop --auto-gen-config # generate .rubocop_todo.yml
inherit_from: .rubocop_todo.yml

Rails/HasAndBelongsToMany:
  Include:
    - app/models/*.rb
  Exclude:
    - app/models/problematic.rb

Layout/LineLength:
  Enabled: false

# info (still returns zero 0 value), refactor, convention, warning, error and fatal.
Lint:
  Severity: error
```

# Extension

```
# .rubocop.yml
require:
  - ../my/file.rb
  - rubocop-extension
```

Create using https://github.com/rubocop-hq/rubocop-extension-generator

```
rubocop-extension-generator rubocop-dependent

```

Instructions
https://docs.rubocop.org/rubocop/development.html

Note pattern
https://github.com/rubocop-hq/rubocop-ast/blob/master/docs/modules/ROOT/pages/node_pattern.adoc

Example how rubocop-rails check if there is an unique index for that column name
https://github.com/rubocop-hq/rubocop-rails/blob/master/lib/rubocop/cop/rails/unique_validation_without_index.rb#L61

# CI

TODO:
https://nvuillam.github.io/mega-linter/installation/ for github action

https://docs.rubocop.org/rubocop/automated_code_review.html for example pronto
